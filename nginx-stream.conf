# Nginx Stream Configuration for Dragon Queen Game Server
# This proxies UDP traffic from port 443 to the internal game server on port 5000
#
# INSTALLATION INSTRUCTIONS:
# 1. Make sure nginx is compiled with the stream module (check: nginx -V 2>&1 | grep stream)
# 2. Add the following to /etc/nginx/nginx.conf at the TOP LEVEL (outside http block):
#
#    stream {
#        include /root/dragon_queen_3d/nginx-stream.conf;
#    }
#
# 3. Test config: sudo nginx -t
# 4. Reload nginx: sudo systemctl reload nginx

# UDP proxy for Dragon Queen game server
server {
    listen 443 udp;
    proxy_pass 127.0.0.1:5000;
    
    # UDP-specific settings
    # UDP-specific settings
    proxy_timeout 60s;
    # proxy_responses 1; # REMOVED: This closes connection after 1 packet!
    
    # Buffer size for UDP packets
    proxy_buffer_size 16k;
}
